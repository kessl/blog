<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/assets/css/default.css?1657612302441165505">
    <link rel="stylesheet" href="/assets/css/fonts.css">
    <link rel="stylesheet" href="/assets/css/monokai.css">
    <link rel="icon" href="/assets/favicon.png" type="image/png">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dotfiles &middot; bitgate</title>
    <link type="application/atom+xml" rel="alternate" href="https://blog.bitgate.cz/feed.xml" />
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Dotfiles" />
<meta name="author" content="daniel" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Dotfiles are configuration files, typically for command line programs. They are named after a Unix convention of starting their name with a dot .. Dotfiles hold configuration for programs like bash, zsh, vim and git." />
<meta property="og:description" content="Dotfiles are configuration files, typically for command line programs. They are named after a Unix convention of starting their name with a dot .. Dotfiles hold configuration for programs like bash, zsh, vim and git." />
<link rel="canonical" href="https://blog.bitgate.cz/dotfiles/" />
<meta property="og:url" content="https://blog.bitgate.cz/dotfiles/" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-10-01T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Dotfiles" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"daniel"},"dateModified":"2021-10-01T00:00:00+00:00","datePublished":"2021-10-01T00:00:00+00:00","description":"Dotfiles are configuration files, typically for command line programs. They are named after a Unix convention of starting their name with a dot .. Dotfiles hold configuration for programs like bash, zsh, vim and git.","headline":"Dotfiles","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.bitgate.cz/dotfiles/"},"url":"https://blog.bitgate.cz/dotfiles/"}</script>
<!-- End Jekyll SEO tag -->

  </head>
  <body>
    <button id="theme-toggle" class="hidden sm:block absolute top-30 right-30 border-none rounded-sm -mx-[5px] px-[5px] hover:bg-dark/10 dark:hover:bg-light/10">
  <span class="hidden dark:inline" title="switch to light theme">‚òÄÔ∏è</span>
  <span class="dark:hidden" title="switch to dark theme">üåë</span>
</button>

    <div class="overflow-x-hidden">
      <div class="golden bg-grid">
        <nav class="flex justify-center space-x-30 sm:space-x-60 underline">
  
    <a href="/">/</a>
  
    <a href="/about">/about</a>
  
    <a href="/archive">/archive</a>
  
    <a href="/tags">/tags</a>
  
</nav>

        <main class="mt-30 md:mt-60 max-w-none prose">
          <h1>Dotfiles</h1>
<p class="text-sm text-muted my-15">
  written by daniel in
  
    <a href="/tags/homelab"><code>homelab</code></a>
  
    <a href="/tags/poweruser"><code>poweruser</code></a>
  
  on 01 Oct 2021
</p>
<p>Dotfiles are configuration files, typically for command line programs.
They are named after a Unix convention of starting their name with a dot <code class="language-plaintext highlighter-rouge">.</code>.
Dotfiles hold configuration for programs like bash, zsh, vim and git.</p>

<p>I keep all my dotfiles in a git repository.
That way I have all my settings backed up, so that I can quickly transfer them to a new machine.
Dotfiles obviously save time when setting up a new laptop or desktop, but they are so easy to use ‚Äì just copy them to your home directory ‚Äì that I can use them even on one-off virtual machines and servers.</p>

<p>In addition to the actual dotfiles, which hold configuration for the shell and other programs, my <a href="https://github.com/kessl/dotfiles" target="_blank">dotfiles repository</a> contains a few scripts for setting up a new machine.
Some dotfiles hold secrets and are encrypted.</p>

<h2 id="actual-dotfiles">Actual dotfiles</h2>

<p>Most of my dotfiles reside in <code class="language-plaintext highlighter-rouge">$HOME</code>.
Some are in <code class="language-plaintext highlighter-rouge">~/.config</code> (<code class="language-plaintext highlighter-rouge">$XDG_CONFIG_HOME</code>), which is IMHO way better, but sadly most programs dump dotfiles in the home directory.</p>

<p>These dotfiles are in the root of the git repo.
Installing them is as easy as copying to the home directory.
This is what <a href="https://github.com/kessl/dotfiles/blob/main/bootstrap.sh" target="_blank"><code class="language-plaintext highlighter-rouge">bootstrap.sh</code></a> does.</p>

<p>My dotfiles mostly define the behavior of <code class="language-plaintext highlighter-rouge">bash</code>, which I use as my shell, as well as the shell prompt.
Other than the shell, there are files for <code class="language-plaintext highlighter-rouge">git</code>, <code class="language-plaintext highlighter-rouge">vim</code> and <code class="language-plaintext highlighter-rouge">curl</code>.</p>

<p><img src="/assets/images/prompt.png" alt="Screenshot of my shell prompt" /></p>

<h2 id="new-machine-setup">New machine setup</h2>

<p>The <code class="language-plaintext highlighter-rouge">setup</code> directory holds scripts which help setting up a new machine.
They are MacOS-specific, except for <code class="language-plaintext highlighter-rouge">secrets.sh</code>, though it doesn‚Äôt make much sense to put secrets like SSH keys and configs with passwords anywhere else than on my main machine.</p>

<h3 id="macossh"><a href="https://github.com/kessl/dotfiles/blob/main/setup/macos.sh" target="_blank">macos.sh</a></h3>

<p>This script configures a new, clean MacOS installation.
It mostly sets options you would configure in the System Preferences GUI (like wallpaper, Dock preferences), but also some more hidden settings like showing path in Finder at all times.
There are some downright esoteric settings like disabling (unbearably slow) window animations in Apple Mail.</p>

<h3 id="brewsh"><a href="https://github.com/kessl/dotfiles/blob/main/setup/brew.sh" target="_blank">brew.sh</a></h3>

<p>Updates Homebrew and installs formulae and casks.
Also switches the shell to less ancient, brew-installed <code class="language-plaintext highlighter-rouge">bash</code>.</p>

<h3 id="vscodesh"><a href="https://github.com/kessl/dotfiles/blob/main/setup/vscode.sh" target="_blank">vscode.sh</a></h3>

<p>Copies settings and keybindings to VSCode‚Äôs configuration folder and installs a couple of extensions.</p>

<h3 id="mountsh"><a href="https://github.com/kessl/dotfiles/blob/main/setup/mount.sh" target="_blank">mount.sh</a></h3>

<p>Extends automount config <code class="language-plaintext highlighter-rouge">/etc/auto_master</code> with <code class="language-plaintext highlighter-rouge">/etc/auto_nfs</code>, which mounts my <a href="/data-storage-with-encrypted-cloud-backup/">NAS</a> as a NFS share.
Also comes in handy after a system update, because MacOS updates reset the <code class="language-plaintext highlighter-rouge">auto_master</code> for some reason.</p>

<h3 id="sudosh"><a href="https://github.com/kessl/dotfiles/blob/main/setup/sudo.sh" target="_blank">sudo.sh</a></h3>

<p>Allows using Touch ID for <code class="language-plaintext highlighter-rouge">sudo</code> instead of password.
Also gets reset by a system update.</p>

<h2 id="secrets">Secrets</h2>

<p>Last script in the repo is <a href="https://github.com/kessl/dotfiles/blob/main/setup/secrets.sh" target="_blank"><code class="language-plaintext highlighter-rouge">setup/secrets.sh</code></a>.
It takes care of decrypting and installing dotfiles which contain secrets such as private keys and passwords and cannot be commited to a git repo in plaintext.
Before running the script, ensure you have <code class="language-plaintext highlighter-rouge">gpg</code> available (such as GnuPG on Mac, installed by <a href="https://github.com/kessl/dotfiles/blob/main/setup/brew.sh" target="_blank"><code class="language-plaintext highlighter-rouge">brew.sh</code></a>) and a private key that can decrypt your secrets.
It‚Äôs important to back this private key up to a password manager.</p>

<p>I prefer to keep all my dotfiles with secrets in <code class="language-plaintext highlighter-rouge">~/.secrets/</code>, which makes it easy to back them up.
I then symlink the files to their original location:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">ln</span> <span class="nt">-s</span> <span class="nv">$SECRETS_DIR</span>/.ssh/<span class="k">*</span> ~/.ssh/
</code></pre></div></div>

<p>That‚Äôs all there is to my dotfiles so far.
Thanks to Mathias Bynens and his awesome <a href="https://github.com/mathiasbynens/dotfiles" target="_blank">dotfiles repo</a> (<a href="https://news.ycombinator.com/item?id=26513528" target="_blank">HN discussion</a>), which were the inspiration and basis for mine.</p>


        </main>
        
          <nav class="mt-150 flex justify-center space-x-30 sm:space-x-60 underline text-sm text-dark-80">
  
    <a href="/">/</a>
  
    <a href="/about">/about</a>
  
    <a href="/archive">/archive</a>
  
    <a href="/tags">/tags</a>
  
</nav>

        
      </div>
    </div>
    <script>
      function applyTheme(theme) {
  document.documentElement.classList.toggle('dark', theme === 'dark')
}

const isDark = localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
applyTheme(isDark ? 'dark' : 'light')

document.getElementById('theme-toggle').addEventListener('click', function() {
  const newTheme = !('theme' in localStorage) ?
    document.documentElement.classList.contains('dark') ? 'light' : 'dark' :
    localStorage.theme === 'dark' ? 'light' : 'dark'
  localStorage.theme = newTheme
  applyTheme(newTheme)
})

    </script>
  </body>
</html>
