<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/assets/css/default.css?1713719352583387167">
    <link rel="stylesheet" href="/assets/css/fonts.css">
    <link rel="stylesheet" href="/assets/css/monokai.css">
    <link rel="stylesheet" href="/assets/css/world.css">
    <link rel="icon" href="/assets/favicon.png" type="image/png">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>GPT in terminal &middot; bitgate</title>
    <link type="application/atom+xml" rel="alternate" href="https://blog.bitgate.cz/feed.xml" />
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="GPT in terminal" />
<meta name="author" content="daniel" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="One application of GPT I found useful in software development is generating and manipulating structured data with vague instructions." />
<meta property="og:description" content="One application of GPT I found useful in software development is generating and manipulating structured data with vague instructions." />
<link rel="canonical" href="https://blog.bitgate.cz/terminal-gpt/" />
<meta property="og:url" content="https://blog.bitgate.cz/terminal-gpt/" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-03-29T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="GPT in terminal" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"daniel"},"dateModified":"2023-03-29T00:00:00+00:00","datePublished":"2023-03-29T00:00:00+00:00","description":"One application of GPT I found useful in software development is generating and manipulating structured data with vague instructions.","headline":"GPT in terminal","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.bitgate.cz/terminal-gpt/"},"url":"https://blog.bitgate.cz/terminal-gpt/"}</script>
<!-- End Jekyll SEO tag -->

  </head>
  <body>
    <button id="theme-toggle" class="hidden sm:block fixed z-10 top-30 right-30 border-none rounded-sm -mx-[5px] px-[5px] hover:bg-dark/10 dark:hover:bg-light/10">
  <span class="hidden dark:inline" title="switch to light theme">☀</span>
  <span class="dark:hidden" title="switch to dark theme">☽</span>
</button>

    
  <button id="start-stop" title="start/pause simulation" class="hidden sm:block fixed z-10 bottom-30 right-30 border-none rounded-sm -mx-[5px] px-[5px] hover:bg-dark/10 dark:hover:bg-light/10">
    &#x23F5;
  </button>
  <div id="world"></div>
  <script src="/assets/world.js"></script>



    <div class="golden bg-grid relative z-10 w-901">
      <nav class="flex justify-center space-x-30 sm:space-x-60 underline">
  
    <a href="/">/</a>
  
    <a href="/about">/about</a>
  
    <a href="/archive">/archive</a>
  
    <a href="/tags">/tags</a>
  
</nav>

      <main class="mt-30 md:mt-60 max-w-none prose">
        <h1>GPT in terminal</h1>
<p class="text-sm text-muted my-15">
  written by daniel in
  
    <a href="/tags/GPT"><code>GPT</code></a>
  
  on 29 Mar 2023
</p>
<p>One application of GPT I found useful in software development is generating and manipulating structured data with vague instructions.</p>

<p>For example: generate test fixtures</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>h generate sample yaml of 5 example <span class="nb">users</span>, not an array

user1:
  name: John Doe
  email: john.doe@example.com
  age: 35
  gender: male
  occupation: software engineer

user2:
  name: Jane Smith
  email: jane.smith@example.com
  age: 28
  gender: female
  occupation: graphic designer

user3:
  name: James Brown
  email: james.brown@example.com
  age: 42
  gender: male
  occupation: accountant

user4:
  name: Sarah Johnson
  email: sarah.johnson@example.com
  age: 31
  gender: female
  occupation: teacher

user5:
  name: Michael Lee
  email: michael.lee@example.com
  age: 25
  gender: male
  occupation: marketing specialist
</code></pre></div></div>

<p>Generate mock UI data:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>h give me a json array of 10 randomly generated sales records with timestamp, amount, description and customer <span class="nb">id</span>, <span class="k">return </span>data only <span class="o">&gt;</span> records.json
<span class="nv">$ </span><span class="nb">cat </span>records.json
<span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"timestamp"</span>: <span class="s2">"2022-05-04 10:32:19"</span>,
      <span class="s2">"amount"</span>: 135.78,
      <span class="s2">"description"</span>: <span class="s2">"Product A"</span>,
      <span class="s2">"customer_id"</span>: <span class="s2">"Cust_3456"</span>
    <span class="o">}</span>,
    <span class="o">{</span>
      <span class="s2">"timestamp"</span>: <span class="s2">"2022-04-30 14:20:55"</span>,
      <span class="s2">"amount"</span>: 57.99,
      <span class="s2">"description"</span>: <span class="s2">"Product B"</span>,
      <span class="s2">"customer_id"</span>: <span class="s2">"Cust_2238"</span>
    <span class="o">}</span>,
    <span class="o">{</span>
      <span class="s2">"timestamp"</span>: <span class="s2">"2022-05-01 09:45:12"</span>,
      <span class="s2">"amount"</span>: 89.99,
      <span class="s2">"description"</span>: <span class="s2">"Product C"</span>,
      <span class="s2">"customer_id"</span>: <span class="s2">"Cust_5789"</span>
    <span class="o">}</span>,
    ...
  <span class="o">]</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Generate CSV:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>h give me an example csv of 10 webpage visits with headers, <span class="k">return </span>csv only <span class="o">&gt;</span> visits.csv
<span class="nv">$ </span><span class="nb">cat </span>visits.csv
Timestamp,Page URL,Referrer,User Agent,IP Address
2021-06-01T09:00:00Z,https://www.example.com/,https://www.google.com/,Mozilla/5.0 <span class="o">(</span>Windows NT 10.0<span class="p">;</span> Win64<span class="p">;</span> x64<span class="o">)</span> AppleWebKit/537.36 <span class="o">(</span>KHTML, like Gecko<span class="o">)</span> Chrome/91.0.4472.77 Safari/537.36,192.168.0.1
2021-06-01T09:05:00Z,https://www.example.com/page1,https://www.example.com/,Mozilla/5.0 <span class="o">(</span>Windows NT 10.0<span class="p">;</span> Win64<span class="p">;</span> x64<span class="o">)</span> AppleWebKit/537.36 <span class="o">(</span>KHTML, like Gecko<span class="o">)</span> Chrome/91.0.4472.77 Safari/537.36,192.168.0.1
2021-06-01T09:10:00Z,https://www.example.com/page2,https://www.example.com/page1,Mozilla/5.0 <span class="o">(</span>Windows NT 10.0<span class="p">;</span> Win64<span class="p">;</span> x64<span class="o">)</span> AppleWebKit/537.36 <span class="o">(</span>KHTML, like Gecko<span class="o">)</span> Chrome/91.0.4472.77 Safari/537.36,192.168.0.1
2021-06-01T09:15:00Z,https://www.example.com/page3,https://www.example.com/page2,Mozilla/5.0 <span class="o">(</span>Windows NT 10.0<span class="p">;</span> Win64<span class="p">;</span> x64<span class="o">)</span> AppleWebKit/537.36 <span class="o">(</span>KHTML, like Gecko<span class="o">)</span> Chrome/91.0.4472.77 Safari/537.36,192.168.0.1
2021-06-01T09:20:00Z,https://www.example.com/page4,https://www.example.com/page3,Mozilla/5.0 <span class="o">(</span>Windows NT 10.0<span class="p">;</span> Win64<span class="p">;</span> x64<span class="o">)</span> AppleWebKit/537.36 <span class="o">(</span>KHTML, like Gecko<span class="o">)</span> Chrome/91.0.4472.77 Safari/537.36,192.168.0.1
2021-06-01T09:25:00Z,https://www.example.com/page5,https://www.example.com/page4,Mozilla/5.0 <span class="o">(</span>Windows NT 10.0<span class="p">;</span> Win64<span class="p">;</span> x64<span class="o">)</span> AppleWebKit/537.36 <span class="o">(</span>KHTML, like Gecko<span class="o">)</span> Chrome/91.0.4472.77 Safari/537.36,192.168.0.1
2021-06-01T09:30:00Z,https://www.example.com/page6,https://www.example.com/page5,Mozilla/5.0 <span class="o">(</span>Windows NT 10.0<span class="p">;</span> Win64<span class="p">;</span> x64<span class="o">)</span> AppleWebKit/537.36 <span class="o">(</span>KHTML, like Gecko<span class="o">)</span> Chrome/91.0.4472.77 Safari/537.36,192.168.0.1
2021-06-01T09:35:00Z,https://www.example.com/page7,https://www.example.com/page6,Mozilla/5.0 <span class="o">(</span>Windows NT 10.0<span class="p">;</span> Win64<span class="p">;</span> x64<span class="o">)</span> AppleWebKit/537.36 <span class="o">(</span>KHTML, like Gecko<span class="o">)</span> Chrome/91.0.4472.77 Safari/537.36,192.168.0.1
2021-06-01T09:40:00Z,https://www.example.com/page8,https://www.example.com/page7,Mozilla/5.0 <span class="o">(</span>Windows NT 10.0<span class="p">;</span> Win64<span class="p">;</span> x64<span class="o">)</span> AppleWebKit/537.36 <span class="o">(</span>KHTML, like Gecko<span class="o">)</span> Chrome/91.0.4472.77 Safari/537.36,192.168.0.1
2021-06-01T09:45:00Z,https://www.example.com/page9,https://www.example.com/page8,Mozilla/5.0 <span class="o">(</span>Windows NT 10.0<span class="p">;</span> Win64<span class="p">;</span> x64<span class="o">)</span> AppleWebKit/537.36 <span class="o">(</span>KHTML, like Gecko<span class="o">)</span> Chrome/91.0.4472.77 Safari/537.36,192.168.0.1
</code></pre></div></div>

<p>GPT can also perform ad-hoc data analyses and transformations, althought sometimes it takes a few prompts:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ h translate user agent strings to browser names with versions in the following csv dataset: $(cat visits.csv)
Timestamp, Page URL, Referrer, User Agent, IP Address
2021-06-01T09:00:00Z, https://www.example.com/, https://www.google.com/, Chrome 91.0.4472.77 (Windows 10), 192.168.0.1
2021-06-01T09:05:00Z, https://www.example.com/page1, https://www.example.com/, Chrome 91.0.4472.77 (Windows 10), 192.168.0.1
2021-06-01T09:10:00Z, https://www.example.com/page2, https://www.example.com/page1, Chrome 91.0.4472.77 (Windows 10), 192.168.0.1
2021-06-01T09:15:00Z, https://www.example.com/page3, https://www.example.com/page2, Chrome 91.0.4472.77 (Windows 10), 192.168.0.1
2021-06-01T09:20:00Z, https://www.example.com/page4, https://www.example.com/page3, Chrome 91.0.4472.77 (Windows 10), 192.168.0.1
2021-06-01T09:25:00Z, https://www.example.com/page5, https://www.example.com/page4, Chrome 91.0.4472.77 (Windows 10), 192.168.0.1
2021-06-01T09:30:00Z, https://www.example.com/page6, https://www.example.com/page5, Chrome 91.0.4472.77 (Windows 10), 192.168.0.1
2021-06-01T09:35:00Z, https://www.example.com/page7, https://www.example.com/page6, Chrome 91.0.4472.77 (Windows 10), 192.168.0.1
2021-06-01T09:40:00Z, https://www.example.com/page8, https://www.example.com/page7, Chrome 91.0.4472.77 (Windows 10), 192.168.0.1
2021-06-01T09:45:00Z, https://www.example.com/page9, https://www.example.com/page8, Chrome 91.0.4472.77 (Windows 10), 192.168.0.1
</code></pre></div></div>

<hr />

<p><code class="language-plaintext highlighter-rouge">h</code> is a bash function inspired by <a href="https://kadekillary.work/posts/1000x-eng/">this blog post</a>.
You’ll need to <a href="https://platform.openai.com/loggedout">obtain an API token</a> first.
You can change <code class="language-plaintext highlighter-rouge">model</code> to <code class="language-plaintext highlighter-rouge">gpt-4</code> instead of <code class="language-plaintext highlighter-rouge">gpt-3.5-turbo</code> if you have access.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function </span>ask_gpt<span class="o">()</span> <span class="o">{</span>
    curl https://api.openai.com/v1/chat/completions <span class="nt">-s</span> <span class="se">\</span>
      <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
      <span class="nt">-H</span> <span class="s2">"Authorization: Bearer </span><span class="nv">$OPENAPI_TOKEN</span><span class="s2">"</span> <span class="se">\</span>
      <span class="nt">-d</span> <span class="s2">"</span><span class="si">$(</span>jq <span class="nt">-c</span> <span class="nt">-n</span> <span class="nt">--arg</span> content <span class="s2">"</span><span class="nv">$*</span><span class="s2">"</span> <span class="s1">'{model:"gpt-3.5-turbo",messages:[{role:"user",$content}],temperature:0.7}'</span><span class="si">)</span><span class="s2">"</span> <span class="se">\</span>
    | jq <span class="nt">-r</span> <span class="s1">'.choices[0].message.content // .error.message'</span>
<span class="o">}</span>

<span class="nb">alias </span><span class="nv">h</span><span class="o">=</span><span class="s2">"ask_gpt"</span>
</code></pre></div></div>


      </main>
      
        <nav class="mt-150 flex justify-center space-x-30 sm:space-x-60 underline text-sm text-dark-80">
  
    <a href="/">/</a>
  
    <a href="/about">/about</a>
  
    <a href="/archive">/archive</a>
  
    <a href="/tags">/tags</a>
  
</nav>

      
    </div>

    <script>function applyTheme(theme) {
  document.documentElement.classList.toggle('dark', theme === 'dark')
}

const isDark = localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)
applyTheme(isDark ? 'dark' : 'light')

document.getElementById('theme-toggle').addEventListener('click', function() {
  const newTheme = !('theme' in localStorage) ?
    document.documentElement.classList.contains('dark') ? 'light' : 'dark' :
    localStorage.theme === 'dark' ? 'light' : 'dark'
  localStorage.theme = newTheme
  applyTheme(newTheme)
})
</script>
  </body>
</html>
